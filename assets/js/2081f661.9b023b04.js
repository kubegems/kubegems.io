"use strict";(self.webpackChunkkubegems_docs=self.webpackChunkkubegems_docs||[]).push([[3976],{3905:function(e,n,t){t.d(n,{Zo:function(){return i},kt:function(){return g}});var r=t(67294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)t=s[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)t=s[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var u=r.createContext({}),p=function(e){var n=r.useContext(u),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},i=function(e){var n=p(e.components);return r.createElement(u.Provider,{value:n},e.children)},m={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},c=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,s=e.originalType,u=e.parentName,i=o(e,["components","mdxType","originalType","parentName"]),c=p(t),g=a,k=c["".concat(u,".").concat(g)]||c[g]||m[g]||s;return t?r.createElement(k,l(l({ref:n},i),{},{components:t})):r.createElement(k,l({ref:n},i))}));function g(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var s=t.length,l=new Array(s);l[0]=c;var o={};for(var u in n)hasOwnProperty.call(n,u)&&(o[u]=n[u]);o.originalType=e,o.mdxType="string"==typeof e?e:a,l[1]=o;for(var p=2;p<s;p++)l[p]=t[p];return r.createElement.apply(null,l)}return r.createElement.apply(null,t)}c.displayName="MDXCreateElement"},28614:function(e,n,t){t.r(n),t.d(n,{assets:function(){return i},contentTitle:function(){return u},default:function(){return g},frontMatter:function(){return o},metadata:function(){return p},toc:function(){return m}});var r=t(87462),a=t(63366),s=(t(67294),t(3905)),l=["components"],o={title:"\u672c\u5730\u5f00\u53d1\u4e0e\u8c03\u8bd5",hide_title:!0,sidebar_position:3},u=void 0,p={unversionedId:"expand/development/kubegems/local-debug",id:"expand/development/kubegems/local-debug",title:"\u672c\u5730\u5f00\u53d1\u4e0e\u8c03\u8bd5",description:"\u672c\u5730\u5f00\u53d1\u4e0e\u8c03\u8bd5",source:"@site/docs/expand/development/kubegems/local-debug.mdx",sourceDirName:"expand/development/kubegems",slug:"/expand/development/kubegems/local-debug",permalink:"/docs/expand/development/kubegems/local-debug",editUrl:"https://github.com/kubegems/kubegems.io/edit/main/docs/expand/development/kubegems/local-debug.mdx",tags:[],version:"current",lastUpdatedBy:"LinkMaq",lastUpdatedAt:1667205772,formattedLastUpdatedAt:"2022/10/31",sidebarPosition:3,frontMatter:{title:"\u672c\u5730\u5f00\u53d1\u4e0e\u8c03\u8bd5",hide_title:!0,sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"\u524d\u7aef\u5f00\u53d1\u624b\u518c",permalink:"/docs/expand/development/kubegems/dashboard"},next:{title:"\u63d2\u4ef6\u5f00\u53d1\u624b\u518c",permalink:"/docs/expand/development/plugins"}},i={},m=[{value:"\u672c\u5730\u5f00\u53d1\u4e0e\u8c03\u8bd5",id:"\u672c\u5730\u5f00\u53d1\u4e0e\u8c03\u8bd5",level:2},{value:"\u5de5\u5177\u51c6\u5907",id:"\u5de5\u5177\u51c6\u5907",level:2},{value:"\u5b89\u88c5 kubegems \u96c6\u7fa4",id:"\u5b89\u88c5-kubegems-\u96c6\u7fa4",level:3},{value:"\u5f00\u59cb\u8c03\u8bd5",id:"\u5f00\u59cb\u8c03\u8bd5",level:3},{value:"\u7ed3\u675f\u8c03\u8bd5",id:"\u7ed3\u675f\u8c03\u8bd5",level:3}],c={toc:m};function g(e){var n=e.components,t=(0,a.Z)(e,l);return(0,s.kt)("wrapper",(0,r.Z)({},c,t,{components:n,mdxType:"MDXLayout"}),(0,s.kt)("h2",{id:"\u672c\u5730\u5f00\u53d1\u4e0e\u8c03\u8bd5"},"\u672c\u5730\u5f00\u53d1\u4e0e\u8c03\u8bd5"),(0,s.kt)("hr",null),(0,s.kt)("p",null,"\u672c\u6587\u7528\u4e8e\u53c2\u8003\u5982\u4f55\u672c\u5730\u8c03\u8bd5 kubegems \u5404\u4e2a\u7ec4\u4ef6\uff0c\u76f8\u5bf9\u4e8e\u666e\u901a\u5e94\u7528\u7a0b\u5e8f\uff0c\u8c03\u8bd5 kubegems \u4e2d\u7684\u7ec4\u4ef6\u4f1a\u6709\u4e00\u5b9a\u7684\u73af\u5883\u4f9d\u8d56\u548c\u590d\u6742\u6027\u3002"),(0,s.kt)("p",null,"\u5982\u679c\u8981\u5728\u672c\u5730\u8c03\u8bd5 kubegems \u96c6\u7fa4\uff0c\u4f60\u9700\u8981\u5728\u672c\u5730\u6784\u9020\u51fa\u6240\u6709\u9700\u8981\u7684\u8fd0\u884c\u73af\u5883\u3002"),(0,s.kt)("h2",{id:"\u5de5\u5177\u51c6\u5907"},"\u5de5\u5177\u51c6\u5907"),(0,s.kt)("ol",null,(0,s.kt)("li",{parentName:"ol"},"\u5df2\u7ecf\u5b89\u88c5\u597d\u7684 kubegems \u96c6\u7fa4"),(0,s.kt)("li",{parentName:"ol"},"vscode + vscode golang \u63d2\u4ef6"),(0,s.kt)("li",{parentName:"ol"},"kubectl"),(0,s.kt)("li",{parentName:"ol"},(0,s.kt)("a",{parentName:"li",href:"https://www.telepresence.io/docs/latest/install/"},"telepresence"),", \u4e00\u4e2a\u5c0f\u5de5\u5177\uff0c\u80fd\u591f\u5c06\u672c\u5730\u73af\u5883\u6a21\u62df\u4e3a\u5bb9\u5668\u5185\u73af\u5883\uff0c\u5e76\u4e14\u80fd\u591f\u91cd\u5b9a\u5411\u5bb9\u5668\u5185\u6d41\u91cf\u5230\u672c\u5730\u3002")),(0,s.kt)("h3",{id:"\u5b89\u88c5-kubegems-\u96c6\u7fa4"},"\u5b89\u88c5 kubegems \u96c6\u7fa4"),(0,s.kt)("p",null,"\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u4f60\u4ec5\u9700\u8981\u4e00\u4e2a kubernetes \u96c6\u7fa4\uff0c\u5e76\u4e14\u6309\u7167\u90e8\u7f72\u6d41\u7a0b\u5b89\u88c5\u597d kubegems\u3002"),(0,s.kt)("p",null,"\u786e\u4fdd\u60a8\u7684 kubectl \u53ef\u4ee5\u76f4\u63a5\u8bbf\u95ee\u5230 kubegems \u6240\u5728\u7684 kubernetes \u96c6\u7fa4\u3002"),(0,s.kt)("p",null,"kubegems \u6709\u8fd9\u4e9b\u7ec4\u4ef6\uff1a"),(0,s.kt)("table",null,(0,s.kt)("thead",{parentName:"table"},(0,s.kt)("tr",{parentName:"thead"},(0,s.kt)("th",{parentName:"tr",align:null},"\u7ec4\u4ef6"),(0,s.kt)("th",{parentName:"tr",align:null},"\u7528\u9014"))),(0,s.kt)("tbody",{parentName:"table"},(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",align:null},"kubegems-api"),(0,s.kt)("td",{parentName:"tr",align:null},"kubegems \u540e\u7aef\u7684\u6838\u5fc3\u670d\u52a1\uff0c\u63d0\u4f9b\u5404\u79cd api.\u5176\u4f9d\u8d56\u4e8e argocd\u3001gitea\u3001mysql\u3001redis\u3001chartmuseum \u670d\u52a1 \u3002")),(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",align:null},"kubegems-dashboard"),(0,s.kt)("td",{parentName:"tr",align:null},"kubegems \u7684\u524d\u7aef\u670d\u52a1\uff0c\u5176\u4f9d\u8d56 kubegems-api,kubegems-msgbus \uff0c\u63d0\u4f9b web UI\u3002")),(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",align:null},"kubegems-msgbus"),(0,s.kt)("td",{parentName:"tr",align:null},"kubegems \u6d88\u606f\u670d\u52a1\uff0ckubegems \u4e2d\u7684\u5b9e\u65f6\u6d88\u606f\u901a\u8fc7\u8be5\u670d\u52a1\u63d0\u4f9b\u3002\u5305\u542b\u544a\u8b66\u4fe1\u606f\u63a8\u9001\uff0c\u8d44\u6e90\u53d8\u52a8\u63a8\u9001\u7b49\u3002")),(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",align:null},"kubegems-worker"),(0,s.kt)("td",{parentName:"tr",align:null},"kubegems \u5f02\u6b65\u4efb\u52a1\u670d\u52a1\uff0c\u7528\u4e8e\u5f02\u6b65\u5904\u7406\u8017\u65f6\u8f83\u957f\u7684\u4efb\u52a1\uff0c\u5b9a\u65f6\u4efb\u52a1\u7b49")),(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",align:null},"kubegems-chartmuseum"),(0,s.kt)("td",{parentName:"tr",align:null},"kubegems chart \u4ed3\u5e93\uff0c\u4e3b\u8981\u7528\u4e8e kubegems \u5e94\u7528\u5546\u5e97")),(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",align:null},"kubegems-local-agent"),(0,s.kt)("td",{parentName:"tr",align:null},"kubegems \u96c6\u7fa4\u4ee3\u7406\uff0c\u90e8\u7f72\u5728\u5404\u4e2a\u88ab\u7ba1\u7406\u96c6\u7fa4\u7684 kubegems-local \u4e0b\u3002\u4e3a kubegems api \u63d0\u4f9b\u6570\u636e\u548c\u6267\u884c\u4fee\u6539\u3002")),(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",align:null},"kubegems-local-controller"),(0,s.kt)("td",{parentName:"tr",align:null},"kubegems \u96c6\u7fa4\u63a7\u5236\u5668\uff0c\u90e8\u7f72\u5728\u5404\u4e2a\u88ab\u7ba1\u7406\u96c6\u7fa4 kubegems-local \u4e0b\u3002\u7528\u4e8e\u81ea\u52a8\u7ba1\u7406\u96c6\u7fa4\u76f8\u5173\u72b6\u6001\uff0c\u5305\u542b\u79df\u6237\u8d44\u6e90\u9650\u5236\uff0c\u7f51\u7edc\u9694\u79bb\u7b49\u529f\u80fd\u3002")))),(0,s.kt)("p",null,"\u6b63\u5e38\u60c5\u51b5\u4e0b\u6709\u8fd9\u4e9b pod"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-sh"},"$ kubectl -n kubegems get po\nNAME                                               READY   STATUS      RESTARTS      AGE\nkubegems-api-db6ccf8df-7mq6t                       1/1     Running     2 (80s ago)   4m25s\nkubegems-argo-cd-app-controller-5b9fd69496-k4l6h   1/1     Running     0             4m25s\nkubegems-argo-cd-repo-server-7b5b55fb45-gpsbz      1/1     Running     0             4m25s\nkubegems-argo-cd-server-85dfdf798-qqn5j            1/1     Running     0             4m25s\nkubegems-chartmuseum-d6fddbfb7-zk5xb               1/1     Running     0             4m24s\nkubegems-charts-init-v1.22.0-beta.2-q2pxz          0/1     Completed   0             4m25s\nkubegems-dashboard-694445cbcb-rnqfd                1/1     Running     0             4m25s\nkubegems-gitea-0                                   1/1     Running     0             4m24s\nkubegems-msgbus-656768db8d-c8w6h                   1/1     Running     3 (69s ago)   4m25s\nkubegems-mysql-0                                   1/1     Running     0             4m24s\nkubegems-redis-master-0                            1/1     Running     0             4m24s\nkubegems-worker-6c46bb58d6-vh658                   1/1     Running     3 (66s ago)   4m25s\n")),(0,s.kt)("h3",{id:"\u5f00\u59cb\u8c03\u8bd5"},"\u5f00\u59cb\u8c03\u8bd5"),(0,s.kt)("p",null,"\u4ee5\u5728 ubuntu linux \u4e0a\u4f7f\u7528 vscode \u8c03\u8bd5 kubegems-api \u4e3a\u4f8b\u3002"),(0,s.kt)("p",null,"clone \u6e90\u7801:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-sh"},"git clone https://github.com/kubegems/kubegems.git\ncd kubegems\n")),(0,s.kt)("p",null,"kubegems-api \u66fe\u7ecf\u53eb service\uff09\u5165\u53e3\u4e3a ",(0,s.kt)("inlineCode",{parentName:"p"},"kubegems service"),",\u8fd9\u662f kubegems \u6700\u6838\u5fc3\u7684\u670d\u52a1\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7 help \u67e5\u770b\u5176\u9700\u8981\u7684\u914d\u7f6e\u3002"),(0,s.kt)("p",null,"\u4e3a\u4e86\u5728\u672c\u5730\u542f\u52a8\u8c03\u8bd5\u9700\u8981\u5148\u6784\u5efa\u597d\u4f9d\u8d56\u73af\u5883\uff0c\u8fd9\u91cc\u4e3b\u8981\u662f\u662f\u51c6\u5907 gitea argocd mysql redis \u7b49\u914d\u7f6e,\u5728\u5bb9\u5668\u4e2d\u8fd9\u4e9b\u914d\u7f6e\u90fd\u901a\u8fc7\u73af\u5883\u53d8\u91cf\u548c\u542f\u52a8\u53c2\u6570\u7684\u65b9\u5f0f\u914d\u7f6e\u5b8c\u6210\u3002"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-sh"},'$ kubectl -n kubegems get po kubegems-api-db6ccf8df-7mq6t -oyaml\napiVersion: v1\nkind: Pod\nmetadata:\n...\n  name: kubegems-api-db6ccf8df-7mq6t\n  namespace: kubegems\n...\nspec:\n...\n  containers:\n  - args:\n    - service\n    - --system-listen=:8080\n    - --jwt-cert=/certs/jwt/tls.crt\n    - --jwt-key=/certs/jwt/tls.key\n    env:\n    - name: MYSQL_PASSWORD\n      valueFrom:\n        secretKeyRef:\n          key: mysql-root-password\n          name: kubegems-mysql\n    - name: REDIS_PASSWORD\n      valueFrom:\n        secretKeyRef:\n          key: redis-password\n          name: kubegems-redis\n    - name: ARGO_PASSWORD\n      valueFrom:\n        secretKeyRef:\n          key: clearPassword\n          name: argocd-secret\n    - name: KUBEGEMS_DEBUG\n      value: "false"\n    - name: LOG_LEVEL\n    envFrom:\n    - secretRef:\n        name: kubegems-config\n    image: registry.k8s.fatalc.cn/kubegems/kubegems:v1.22.0-beta.2\n    imagePullPolicy: IfNotPresent\n    name: api\n    ports:\n    - containerPort: 8080\n      name: http\n      protocol: TCP\n    - containerPort: 9100\n      name: metrics\n      protocol: TCP\n...\n    volumeMounts:\n    - mountPath: /app/data\n      name: data\n    - mountPath: /certs/jwt\n      name: jwt-certs\n      readOnly: true\n    - mountPath: /var/run/secrets/kubernetes.io/serviceaccount\n      name: kube-api-access-v4wsl\n      readOnly: true\n')),(0,s.kt)("p",null,"\u4e3a\u4e86\u5728\u672c\u5730\u4e5f\u914d\u7f6e\u8fd9\u4e9b\u4f9d\u8d56\uff0c\u4f60\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a"),(0,s.kt)("ol",null,(0,s.kt)("li",{parentName:"ol"},"\u5c06\u96c6\u7fa4\u4e2d\u7684\u4f9d\u8d56\u670d\u52a1\u4f7f\u7528 NodePort \u66b4\u9732\u51fa\u6765\uff0c\u5728\u672c\u5730\u624b\u52a8\u914d\u7f6e\u8fd9\u4e9b\u670d\u52a1\u7684\u5730\u5740\u3002"),(0,s.kt)("li",{parentName:"ol"},"\u4f7f\u7528 telepresence \u5e2e\u4f60\u5b8c\u6210\u8fd9\u4e00\u5207\u3002")),(0,s.kt)("p",null,"\u6211\u4eec\u9009\u62e9 telepresence\uff0c\u8fd9\u786e\u5b9e\u975e\u5e38\u65b9\u4fbf\u3002"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-sh"},"telepresence intercept -n kubegems kubegems-api --port 8081:80 --env-file=bin/api.env\n")),(0,s.kt)("p",null,"\u5148\u89e3\u91ca\u8fd9\u4e2a\u547d\u4ee4\uff0c\u8fd9\u4e2a\u8868\u793a\u52ab\u6301(\u6216\u8005\u62e6\u622a) ",(0,s.kt)("inlineCode",{parentName:"p"},"-n kubegems")," kubegems \u547d\u540d\u7a7a\u95f4\u4e0b ",(0,s.kt)("inlineCode",{parentName:"p"},"kubegems-api")," \u7684\u670d\u52a1(service)\u7684 80 \u7aef\u53e3\u5e76\u4e0e\u672c\u5730 8081 \u7aef\u53e3\u6620\u5c04\uff0c\u5e76\u5c06\u5bb9\u5668\u5185\u7684\u73af\u5883\u53d8\u91cf\u5b58\u50a8\u5230 ",(0,s.kt)("inlineCode",{parentName:"p"},"bin/api.env"),"\u6587\u4ef6\u4e2d\u3002"),(0,s.kt)("blockquote",null,(0,s.kt)("p",{parentName:"blockquote"},"telepresence \u4f1a\u6839\u636e service \u627e\u5230\u5bf9\u5e94\u7684 pod\uff0c\u5e76\u4fee\u6539 pod \u6ce8\u5165 sidecar\u3002")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-sh"},'$ telepresence intercept -n kubegems kubegems-api --port 8081:80 --env-file=bin/api.env\nLaunching Telepresence Root Daemon\nNeed root privileges to run: /usr/local/bin/telepresence daemon-foreground /home/user/.cache/telepresence/logs /home/user/.config/telepresence\nLaunching Telepresence User Daemon\nconnector.Connect: traffic manager not found, if it is not installed, please run \'telepresence helm install\'\n$ telepresence helm install\nTelepresence Network is already disconnected\nTelepresence Traffic Manager is already disconnected\n\nTraffic Manager installed successfully\n# \u9996\u6b21\u8fd0\u884c\u4f1a\u63d0\u793a\u5728\u96c6\u7fa4\u5185\u5b89\u88c5 traffic manager\uff0c\u5b89\u88c5\u5b8c\u6210\u540e\u518d\u6b21\u8fd0\u884c\u5373\u53ef\u3002\n$ telepresence intercept -n kubegems kubegems-api --port 8081:80 --env-file=bin/api.env\nConnected to context kubernetes-admin@kubernetes (https://10.12.32.21:6443)\nAn update of telepresence from version 2.7.3 to 2.7.6 is available. Please visit https://www.getambassador.io/docs/telepresence/latest/install/upgrade/ for more info.\ntelepresence: error: rpc error: code = DeadlineExceeded desc = request timed out while waiting for agent kubegems-api.kubegems to arrive\n\nSee logs for details (3 errors found): "/home/user/.cache/telepresence/logs/daemon.log"\n\nSee logs for details (2 errors found): "/home/user/.cache/telepresence/logs/connector.log"\nIf you think you have encountered a bug, please run `telepresence gather-logs` and attach the telepresence_logs.zip to your github issue or create a new one: https://github.com/telepresenceio/telepresence/issues/new?template=Bug_report.md .\n# \u7b2c\u4e00\u6b21\u8fd0\u884c\u4f1a\u62c9\u53d6\u955c\u50cf\uff0c\u56e0\u8017\u65f6\u8f83\u957f\uff0c\u4f1a\u63d0\u793a\u4e0a\u8ff0\u9519\u8bef\u3002\u4e0d\u8981\u7d27\u5f20\uff0c\u7a0d\u7b49\u4e00\u4e0b\u5c31\u597d\u3002\n# \u4f60\u4f1a\u770b\u5230\u539f\u6765\u7684 kubegems-api pod \u4ece 1/1 \u53d8\u4e3a\u4e86 2/2\uff0ctelepresence \u4e3apod\u6ce8\u5165\u4e86sidecar\uff0c\u7528\u4e8e\u52ab\u6301pod\u6d41\u91cf\u5230\u672c\u5730\u3002\n$ kubectl -n kubegems get po\nNAME                                               READY   STATUS            RESTARTS      AGE\nkubegems-api-67fb584bb9-rplsb                      0/2     PodInitializing   0             72s\n# \u7b49\u5230 Running \u540e\u518d\u6267\u884c\u4e00\u6b21\n$ kubectl -n kubegems get po\nNAME                                               READY   STATUS      RESTARTS      AGE\nkubegems-api-67fb584bb9-rplsb                      2/2     Running     0             2m36s\n# \u770b\u5230\u5982\u4e0b\u63d0\u793a\u5c31\u662f\u6210\u529f\u4e86\n$ telepresence intercept -n kubegems kubegems-api --port 8081:80 --env-file=bin/api.env\nUsing Deployment kubegems-api\nintercepted\n    Intercept name         : kubegems-api-kubegems\n    State                  : ACTIVE\n    Workload kind          : Deployment\n    Destination            : 127.0.0.1:8081\n    Service Port Identifier: http\n    Volume Mount Error     : sshfs is not installed on your local machine\n    Intercepting           : all TCP requests\nIntercepting all traffic to your service. To route a subset of the traffic instead, use a personal intercept. You can enable personal intercepts by authenticating to Ambassador Cloud with "telepresence login".\n')),(0,s.kt)("p",null,"\u6b64\u65f6\u6d41\u5411 kubegems-api pod \u7684\u6d41\u91cf\u88ab\u91cd\u5b9a\u5411\u5230\u4e86\u672c\u5730 8081 \u7aef\u53e3\uff0c\u8fd9\u4e2a\u65f6\u5019\u8bbf\u95ee kubegems web \u9875\u9762\u4f1a\u63d0\u793a\u9519\u8bef\u4e86\uff0c\u56e0\u4e3a\u672c\u5730\u6ca1\u6709\u8fd0\u884c kubegems-api \u670d\u52a1\u3002\n\u5e76\u4e14\u6b64\u65f6\uff0c\u4f60\u7684\u4e3b\u673a\u80fd\u591f\u76f4\u63a5\u89e3\u6790\u548c\u8bbf\u95ee\u5230\u96c6\u7fa4\u7684 Pod IP \u548c Service IP \u4e86,\u662f\u4e0d\u662f\u975e\u5e38\u795e\u5947\uff08\u6ca1\u9519\uff0ctelepresence \u5e72\u7684\uff09."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-sh"},'$ nslookup kubegems-gitea-http.kubegems\nServer:         127.0.0.53\nAddress:        127.0.0.53#53\n\nName:   kubegems-gitea-http.kubegems\nAddress: 10.244.0.179\n$ curl kubegems-gitea-http.kubegems:3000\n<!DOCTYPE html>\n<html lang="en-US" class="theme-">\n...\n')),(0,s.kt)("p",null,"\u63a5\u4e0b\u6765\u5f00\u59cb\u914d\u7f6e vscode debug \u6765\u4ee5\u8c03\u8bd5\u65b9\u5f0f\u542f\u52a8 kubegems-api"),(0,s.kt)("p",null,"\u65b0\u5efa\u6587\u4ef6 ",(0,s.kt)("inlineCode",{parentName:"p"},".vscode/launch.json")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "version": "0.2.0",\n  "configurations": [\n    {\n      "name": "api",\n      "type": "go",\n      "request": "launch",\n      "mode": "auto",\n      "program": "${workspaceFolder}/cmd",\n      "cwd": "${workspaceFolder}",\n      "envFile": "${workspaceFolder}/bin/api.env", // telepresence \u751f\u6210\u7684 env file\n      "args": ["service", "--system-listen=:8081"]\n    }\n  ]\n}\n')),(0,s.kt)("p",null,"\u73b0\u5728\u8fd8\u5dee certs \uff0c certs \u91cc\u9762\u7684\u8bc1\u4e66\u7528\u4e8e\u751f\u6210\u7b7e\u540d\u7684 token\uff0c\u9700\u8981\u4ece\u96c6\u7fa4\u4e2d\u4e0b\u8f7d\u5230\u672c\u5730\u3002"),(0,s.kt)("blockquote",null,(0,s.kt)("p",{parentName:"blockquote"},"\u53ef\u4ee5\u4f7f\u7528 ",(0,s.kt)("a",{parentName:"p",href:"https://www.telepresence.io/docs/latest/reference/volume/"},"telepersence volume mounts")," \u6765\u5e2e\u6211\u4eec\u6302\u8f7d\u8bc1\u4e66\uff0c\u4f46\u6709\u70b9\u66f2\u6298\uff0c\u4e0d\u91c7\u7528\u8fd9\u79cd\u65b9\u5f0f\u3002")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-sh"},"mkdir -p certs/jwt\nkubectl -n kubegems get secrets kubegems-api-jwt -o jsonpath=\"{.data['tls\\.crt']}\" | base64 -d >certs/jwt/tls.crt\nkubectl -n kubegems get secrets kubegems-api-jwt -o jsonpath=\"{.data['tls\\.key']}\" | base64 -d >certs/jwt/tls.key\n")),(0,s.kt)("p",null,"\u73b0\u5728\u5df2\u7ecf\u4e07\u4e8b\u4ff1\u5907\uff0c\u53ef\u4ee5\u4f7f\u7528 vscode \u5f00\u59cb debug \u4e86\u3002"),(0,s.kt)("blockquote",null,(0,s.kt)("p",{parentName:"blockquote"},"\u4e00\u4e9b\u65f6\u5019\uff0c\u4f60\u53ef\u80fd\u9700\u8981\u5728 debug \u4e4b\u524d\u4f7f\u7528 ",(0,s.kt)("inlineCode",{parentName:"p"},"make generate")," \u6765\u751f\u6210\u4e00\u4e0b\u5fc5\u8981\u6570\u636e")),(0,s.kt)("h3",{id:"\u7ed3\u675f\u8c03\u8bd5"},"\u7ed3\u675f\u8c03\u8bd5"),(0,s.kt)("p",null,"\u5728 debug \u5b8c\u6210\u540e\uff0c\u4f7f\u7528\u4e0b\u9762\u547d\u4ee4\u8fd8\u539f\u73af\u5883\uff1a"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-sh"},"telepresence leave kubegems-api-kubegems\n")),(0,s.kt)("p",null,"\u5982\u679c\u60f3\u8981\u79fb\u9664\u9644\u52a0\u5728 pod \u4e0a\u7684 sidecar \u53ef\u4ee5\u6267\u884c\uff1a"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-sh"},"telepresence uninstall -a\n")))}g.isMDXComponent=!0}}]);